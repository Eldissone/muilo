<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Muilo</title>
    
    
    
    <link rel="stylesheet" href="/src/styles/main.css">
    
    <style>
        body {
            font-family: 'Lexend', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #13ec5b 0%, #0bc44a 100%);
        }
        
        .status-pending {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .status-confirmed {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .status-inprogress {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .status-completed {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .sidebar-link {
            transition: all 0.2s ease;
        }
        
        .sidebar-link.active {
            background: linear-gradient(135deg, rgba(19, 236, 91, 0.1) 0%, rgba(11, 196, 74, 0.1) 100%);
            border-left: 3px solid #13ec5b;
        }
        
        .floating-action-button {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
        
        .appointment-card {
            transition: all 0.3s ease;
        }
        
        .appointment-card:hover {
            transform: translateX(4px);
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-text-dark dark:text-text-light font-display">
    <!-- Dashboard Layout -->
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="hidden lg:flex lg:flex-col lg:w-64 bg-white dark:bg-surface-dark border-r border-gray-100 dark:border-white/5">
            <!-- Logo -->
            <div class="p-6">
                <a href="/index.html" class="flex items-center gap-3">
                    <span class="text-xl font-bold text-text-dark dark:text-white">Muilo</span>
                </a>
            </div>
            
            <!-- User Profile -->
            <div class="px-6 py-4 border-b border-gray-100 dark:border-white/5">
                <div class="flex items-center gap-3">
                    <div class="relative">
                        <img 
                            src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face" 
                            alt="Maria Silva"
                            class="w-12 h-12 rounded-full object-cover"
                        >
                        <div class="absolute bottom-0 right-0 w-3 h-3 bg-primary rounded-full border-2 border-white dark:border-surface-dark"></div>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Bem-vindo(a),</p>
                        <h3 class="font-bold text-text-dark dark:text-white" id="userName">Maria Silva</h3>
                    </div>
                </div>
            </div>
            
            <!-- Navigation -->
            <nav class="flex-1 p-4">
                <div class="space-y-1">
                    <a href="/src/pages/dashboard.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 active">
                        <span class="material-symbols-outlined">dashboard</span>
                        <span>Visão Geral</span>
                    </a>
                    
                    <a href="/src/pages/appointments.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                        <span class="material-symbols-outlined">calendar_month</span>
                        <span>Meus Agendamentos</span>
                    </a>
                    
                    <a href="/src/pages/historical.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                        <span class="material-symbols-outlined">history</span>
                        <span>Histórico</span>
                    </a>
                    
                    <a href="/src/pages/profile.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                        <span class="material-symbols-outlined">person</span>
                        <span>Meu Perfil</span>
                    </a>
                    
                    <a href="/src/pages/dashboard.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                        <span class="material-symbols-outlined">monitor_heart</span>
                        <span>Saúde</span>
                    </a>
                    
                    <a href="/src/pages/dashboard.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                        <span class="material-symbols-outlined">folder</span>
                        <span>Documentos</span>
                    </a>
                    
                    <a href="/src/pages/dashboard.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                        <span class="material-symbols-outlined">support_agent</span>
                        <span>Suporte</span>
                    </a>
                </div>
            </nav>
            
            <!-- Logout -->
            <div class="p-4 border-t border-gray-100 dark:border-white/5">
                <button onclick="logout()" class="flex items-center gap-3 p-3 w-full text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors">
                    <span class="material-symbols-outlined">logout</span>
                    <span>Sair</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Mobile Header -->
            <header class="lg:hidden bg-white dark:bg-surface-dark border-b border-gray-100 dark:border-white/5">
                <div class="px-4 py-3 flex items-center justify-between">
                    <!-- Mobile Menu Button -->
                    <button id="mobileMenuButton" class="text-gray-600 dark:text-gray-300">
                        <span class="material-symbols-outlined text-2xl">menu</span>
                    </button>
                    
                   
                    
                    <!-- Notifications -->
                    <button class="relative text-gray-600 dark:text-gray-300">
                        <span class="material-symbols-outlined">notifications</span>
                        <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                    </button>
                </div>
            </header>

            <!-- Mobile Sidebar -->
            <div id="mobileSidebar" class="lg:hidden fixed inset-0 z-50 bg-black/50 hidden">
                <div class="absolute left-0 top-0 bottom-0 w-64 bg-white dark:bg-surface-dark transform transition-transform">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-8">
                            <a href="/index.html" class="flex items-center gap-3">
                                <span class="text-xl font-bold text-text-dark dark:text-white">Muilo</span>
                            </a>
                            <button id="closeMobileMenu" class="text-gray-600 dark:text-gray-300">
                                <span class="material-symbols-outlined text-2xl">close</span>
                            </button>
                        </div>
                        
                        <!-- Mobile Navigation -->
                        <nav class="space-y-1">
                            <a href="/src/pages/dashboard.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 active">
                                <span class="material-symbols-outlined">dashboard</span>
                                <span>Visão Geral</span>
                            </a>
                            
                            <a href="/src/pages/appointments.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                                <span class="material-symbols-outlined">calendar_month</span>
                                <span>Meus Agendamentos</span>
                            </a>
                            
                            <a href="/src/pages/historical.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                                <span class="material-symbols-outlined">history</span>
                                <span>Histórico</span>
                            </a>
                            
                            <a href="/src/pages/profile.html" class="sidebar-link flex items-center gap-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5">
                                <span class="material-symbols-outlined">person</span>
                                <span>Meu Perfil</span>
                            </a>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <main class="flex-1 overflow-y-auto p-4 lg:p-6">
                <!-- Header -->
                <div class="mb-8">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                        <div>
                            <h1 class="text-2xl lg:text-3xl font-bold text-text-dark dark:text-white">
                                Olá, <span id="userNameMobile">Maria</span>!
                            </h1>
                            <p class="text-gray-600 dark:text-gray-300 mt-1">
                                Aqui está o resumo da sua saúde
                            </p>
                        </div>
                        
                        <button 
                            onclick="newAppointment()"
                            class="gradient-bg hover:bg-primary-dark text-background-dark font-bold py-3 px-6 rounded-xl shadow-lg shadow-primary/25 transform transition hover:scale-[1.02] active:scale-[0.98] flex items-center gap-2"
                        >
                            <span class="material-symbols-outlined">add</span>
                            Novo Agendamento
                        </button>
                    </div>
                </div>

                <!-- Status Board -->
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                    <div class="status-pending rounded-2xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-bold text-lg">Pendentes</h3>
                            <span class="material-symbols-outlined">schedule</span>
                        </div>
                        <span id="count-pending" class="text-3xl font-bold">2</span>
                        <p class="text-sm opacity-90 mt-2">Aguardando confirmação</p>
                    </div>
                    
                    <div class="status-confirmed rounded-2xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-bold text-lg">Confirmados</h3>
                            <span class="material-symbols-outlined">check_circle</span>
                        </div>
                        <span id="count-confirmed" class="text-3xl font-bold">3</span>
                        <p class="text-sm opacity-90 mt-2">Agendamentos ativos</p>
                    </div>
                    
                    <div class="status-inprogress rounded-2xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-bold text-lg">Em Andamento</h3>
                            <span class="material-symbols-outlined">play_circle</span>
                        </div>
                        <span id="count-inprogress" class="text-3xl font-bold">1</span>
                        <p class="text-sm opacity-90 mt-2">Sendo atendido agora</p>
                    </div>
                    
                    <div class="status-completed rounded-2xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-bold text-lg">Concluídos</h3>
                            <span class="material-symbols-outlined">done_all</span>
                        </div>
                        <span id="count-completed" class="text-3xl font-bold">12</span>
                        <p class="text-sm opacity-90 mt-2">Este mês</p>
                    </div>
                </div>

                <!-- Two Column Layout -->
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Left Column - Appointments -->
                    <div class="lg:col-span-2">
                        <!-- Appointments Header -->
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-bold text-text-dark dark:text-white">
                                Agendamentos Recentes
                            </h2>
                            <a href="/src/pages/appointments.html" class="text-primary hover:text-primary-dark font-medium text-sm flex items-center gap-1">
                                Ver todos
                                <span class="material-symbols-outlined text-sm">chevron_right</span>
                            </a>
                        </div>
                        
                        <!-- Appointments List -->
                        <div id="appointments-container" class="space-y-4">
                            <!-- Appointments will be loaded here -->
                        </div>
                        
                        <!-- Loading State -->
                        <div id="appointments-loading" class="text-center py-8">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"></div>
                            <p class="text-gray-600 dark:text-gray-300">Carregando agendamentos...</p>
                        </div>
                        
                        <!-- Empty State -->
                        <div id="appointments-empty" class="hidden text-center py-12">
                            <div class="text-gray-400 mb-4">
                                <span class="material-symbols-outlined text-4xl">calendar_month</span>
                            </div>
                            <h3 class="text-lg font-bold text-gray-700 dark:text-gray-300 mb-2">
                                Nenhum agendamento encontrado
                            </h3>
                            <p class="text-gray-600 dark:text-gray-300 mb-6">
                                Agende sua primeira consulta
                            </p>
                            <button 
                                onclick="newAppointment()"
                                class="gradient-bg hover:bg-primary-dark text-background-dark font-semibold py-3 px-6 rounded-xl transition-all active:scale-95"
                            >
                                Agendar agora
                            </button>
                        </div>
                    </div>
                    
                    <!-- Right Column - Quick Actions & Health -->
                    <div class="space-y-8">
                        <!-- Quick Actions -->
                        <div class="bg-white dark:bg-surface-dark rounded-2xl p-6 border border-gray-100 dark:border-white/5">
                            <h3 class="font-bold text-lg text-text-dark dark:text-white mb-4">
                                Ações Rápidas
                            </h3>
                            <div class="grid grid-cols-2 gap-3">
                                <button 
                                    onclick="viewDocuments()"
                                    class="flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-xl transition-colors"
                                >
                                    <span class="material-symbols-outlined text-blue-500 text-2xl mb-2">folder</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Documentos</span>
                                </button>
                                
                                <button 
                                    onclick="viewExams()"
                                    class="flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-xl transition-colors"
                                >
                                    <span class="material-symbols-outlined text-purple-500 text-2xl mb-2">lab_profile</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Exames</span>
                                </button>
                                
                                <button 
                                    onclick="viewMedications()"
                                    class="flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-xl transition-colors"
                                >
                                    <span class="material-symbols-outlined text-green-500 text-2xl mb-2">medication</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Medicamentos</span>
                                </button>
                                
                                <button 
                                    onclick="contactSupport()"
                                    class="flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-xl transition-colors"
                                >
                                    <span class="material-symbols-outlined text-orange-500 text-2xl mb-2">support_agent</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Suporte</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Health Summary -->
                        <div class="bg-white dark:bg-surface-dark rounded-2xl p-6 border border-gray-100 dark:border-white/5">
                            <h3 class="font-bold text-lg text-text-dark dark:text-white mb-4">
                                Resumo de Saúde
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-600 dark:text-gray-300">Pressão Arterial</span>
                                        <span class="font-medium text-green-600">Normal</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-white/5 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 80%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-600 dark:text-gray-300">Glicemia</span>
                                        <span class="font-medium text-yellow-600">Atenção</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-white/5 rounded-full h-2">
                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 60%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-600 dark:text-gray-300">Frequência Cardíaca</span>
                                        <span class="font-medium text-green-600">Ideal</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-white/5 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 90%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <button 
                                onclick="viewHealthDetails()"
                                class="w-full mt-6 py-3 bg-primary/10 hover:bg-primary/20 text-primary font-medium rounded-xl transition-colors"
                            >
                                Ver detalhes completos
                            </button>
                        </div>
                        
                        <!-- Upcoming Appointment -->
                        <div id="nextAppointmentCard" class="bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 rounded-2xl p-5">
                            <h3 class="font-bold text-lg text-text-dark dark:text-white mb-3">
                                Próximo Agendamento
                            </h3>
                            <div class="flex items-start gap-3 mb-4">
                                <img 
                                    src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=100&h=100&fit=crop&crop=face" 
                                    alt="Dr. Roberto"
                                    class="w-12 h-12 rounded-full object-cover"
                                >
                                <div>
                                    <h4 class="font-bold text-text-dark dark:text-white">Dr. Roberto Silva</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-300">Cardiologista</p>
                                </div>
                            </div>
                            <div class="space-y-2 mb-4">
                                <div class="flex items-center gap-2 text-sm">
                                    <span class="material-symbols-outlined text-gray-500">calendar_month</span>
                                    <span class="text-gray-700 dark:text-gray-300">Hoje, 14:00</span>
                                </div>
                                <div class="flex items-center gap-2 text-sm">
                                    <span class="material-symbols-outlined text-gray-500">video_camera_front</span>
                                    <span class="text-gray-700 dark:text-gray-300">Teleconsulta</span>
                                </div>
                            </div>
                            <button 
                                onclick="joinVirtualRoom()"
                                class="w-full gradient-bg hover:bg-primary-dark text-background-dark font-bold py-3 rounded-xl transition-colors"
                            >
                                Entrar na Sala Virtual
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Floating Action Button (Mobile) -->
    <button 
        onclick="newAppointment()"
        class="lg:hidden fixed bottom-24 right-6 z-40 floating-action-button gradient-bg text-background-dark w-14 h-14 rounded-full shadow-lg shadow-primary/30 flex items-center justify-center"
    >
        <span class="material-symbols-outlined text-2xl">add</span>
    </button>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="lg:hidden fixed bottom-0 left-0 right-0 z-30 bg-white dark:bg-surface-dark border-t border-gray-100 dark:border-white/5 py-3">
        <div class="container mx-auto px-4">
            <div class="flex justify-around items-center">
                <a href="dashboard.html" class="flex flex-col items-center text-primary">
                    <span class="material-symbols-outlined text-2xl">home</span>
                    <span class="text-xs mt-1">Início</span>
                </a>
                
                <a href="search.html" class="flex flex-col items-center text-gray-600 dark:text-gray-300 hover:text-primary transition-colors">
                    <span class="material-symbols-outlined text-2xl">search</span>
                    <span class="text-xs mt-1">Buscar</span>
                </a>
         
                
                <a href="appointments.html" class="flex flex-col items-center text-gray-600 dark:text-gray-300 hover:text-primary transition-colors">
                    <span class="material-symbols-outlined text-2xl">calendar_month</span>
                    <span class="text-xs mt-1">Agendamentos</span>
                </a>

                     <a href="chat.html" class="flex flex-col items-center text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors relative">
                    <span class="material-symbols-outlined text-2xl">chat_bubble</span>
                    <span class="absolute -top-1 -right-1 h-2 w-2 bg-red-500 rounded-full"></span>
                    <span class="text-xs mt-1">Chat</span>
                </a>
                
                <a href="profile.html" class="flex flex-col items-center text-gray-600 dark:text-gray-300 hover:text-primary transition-colors">
                    <span class="material-symbols-outlined text-2xl">person</span>
                    <span class="text-xs mt-1">Perfil</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- JavaScript -->
    <script>
      const mobileMenuButton = document.getElementById('mobileMenuButton');
      const closeMobileMenu = document.getElementById('closeMobileMenu');
      const mobileSidebar = document.getElementById('mobileSidebar');
      if (mobileMenuButton && mobileSidebar) {
        mobileMenuButton.addEventListener('click', () => mobileSidebar.classList.remove('hidden'));
      }
      if (closeMobileMenu && mobileSidebar) {
        closeMobileMenu.addEventListener('click', () => mobileSidebar.classList.add('hidden'));
      }
      if (mobileSidebar) {
        mobileSidebar.addEventListener('click', (e) => { if (e.target === mobileSidebar) mobileSidebar.classList.add('hidden'); });
      }
      const navLinks = document.querySelectorAll('.sidebar-link');
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          if (!this.getAttribute('href').startsWith('#')) return;
          e.preventDefault();
          navLinks.forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          if (mobileSidebar) mobileSidebar.classList.add('hidden');
        });
      });
      window.logout = function() {
        if (confirm('Deseja realmente sair?')) {
          localStorage.removeItem('token');
          localStorage.removeItem('user');
          window.location.href = '/index.html';
        }
      };
    </script>
    <script type="module" src="/src/js/dashboardClient.js"></script>
</body>
</html>
